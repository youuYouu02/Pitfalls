## IP地址

[toc]

#### `hostname -i` 回环地址 

> 其实就是 `ip addr` 中显示的 eth0

```powershell
# wsl
hostname -i
```

`127.0.0.1` 是 localhost （回环地址）

- 用于在本地系统上进行网络通信
- 不能用于从外部网络访问你的系统，只能系统内部使用
- ![image-20230518140025888](D:\ZJU\typoraImg\image-20230518140025888.png)

#### `hostname -I` WSL实例在本地网络上的IP地址

> 即 `ip addr` 中显示的 lo

：WSL环境在本地网络中的唯一标识符

```powershell
# wsl
hostname -I // 172.29.44.15
```

这意味着在你的本地网络中，你可以使用这个IP地址来访问你的WSL实例。例如，如果你在WSL实例中运行一个网络服务，比如一个Web服务器或数据库服务器，那么你的其他设备可以使用这个IP地址来访问这个服务。

然而，要注意的是，这个IP地址只在你的本地网络中有效。如果你想从互联网上的其他地方访问你的WSL实例，你可能需要设置端口转发或使用其他的网络配置技术，以便外部的请求能到达你的WSL实例。

> 💡重启WSL服务会改变这个IP地址吗
>
> 是的，每次你重启WSL（Windows Subsystem for Linux）服务，系统可能会为它分配一个新的IP地址。这取决于你的网络环境和配置。因为大多数家庭和办公网络使用的是动态主机配置协议（DHCP）来自动分配IP地址，所以设备重启或网络连接断开并重新连接时，通常会获取到新的IP地址。
>
> 如果你希望你的WSL实例每次都使用相同的IP地址，你可能需要进行一些额外的配置。但是，这种配置超出了WSL本身的范围，你可能需要在你的网络路由器或DHCP服务器上进行设置，或者手动在WSL环境中设置一个静态IP地址。

#### `ipconfig`：Windows 指令，用于显示系统所有网络接口的配置信息

：显示电脑上所有网络接口的IP配置

```
PS C:\Users\wengxin> ipconfig

Windows IP 配置

以太网适配器 vEthernet (WSL):

   连接特定的 DNS 后缀 . . . . . . . :
   本地链接 IPv6 地址. . . . . . . . : fe80::f8bb:af6b:6ef:9eb4%44
   IPv4 地址 . . . . . . . . . . . . : 172.29.32.1
   子网掩码  . . . . . . . . . . . . : 255.255.240.0
   默认网关. . . . . . . . . . . . . :

无线局域网适配器 本地连接* 1:

   媒体状态  . . . . . . . . . . . . : 媒体已断开连接
   连接特定的 DNS 后缀 . . . . . . . :

无线局域网适配器 本地连接* 10:

   媒体状态  . . . . . . . . . . . . : 媒体已断开连接
   连接特定的 DNS 后缀 . . . . . . . :

无线局域网适配器 WLAN:

   连接特定的 DNS 后缀 . . . . . . . :
   本地链接 IPv6 地址. . . . . . . . : fe80::2185:6abd:9744:54a9%20
   IPv4 地址 . . . . . . . . . . . . : 192.168.3.25
   子网掩码  . . . . . . . . . . . . : 255.255.255.0
   默认网关. . . . . . . . . . . . . : 192.168.3.1

以太网适配器 以太网 2:

   媒体状态  . . . . . . . . . . . . : 媒体已断开连接
   连接特定的 DNS 后缀 . . . . . . . :

以太网适配器 蓝牙网络连接:

   媒体状态  . . . . . . . . . . . . : 媒体已断开连接
   连接特定的 DNS 后缀 . . . . . . . :
```

- `IPv4` 地址：在Internet协议版本4（IPv4）中，每个设备在网络中的唯一标识就是一个IPv4地址。IPv4地址由32位二进制数字构成，通常被划分为四个8位的段，每个段的值在0到255之间，各个段之间用点 `.` 分隔，例如192.168.1.1。每个IPv4地址都唯一地指向网络中的一个设备，就像你的邮寄地址唯一地指向你的家一样。

- 子网掩码：子网掩码是用来划分网络地址和主机地址的。在IPv4中，一个完整的地址实际上包括两部分：网络地址和主机地址。网络地址标识的是网络本身，主机地址则标识的是该网络内的特定设备。子网掩码的作用就是告诉设备如何划分网络地址和主机地址。子网掩码的格式和IPv4地址一样，由四个8位的数字组成，但它的所有网络地址部分的位都被设置为1，所有主机地址部分的位都被设置为0。例如，一个常见的子网掩码255.255.255.0表示前三个数字是网络地址，最后一个数字是主机地址。

  ![image-20230518141523064](D:\ZJU\typoraImg\image-20230518141523064.png)

#### `ip addr` ：Linux 指令，用于显示系统所有网络接口的配置信息

```
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:15:5d:2e:12:b3 brd ff:ff:ff:ff:ff:ff
    inet 172.29.44.15/20 brd 172.29.47.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::215:5dff:fe2e:12b3/64 scope link
       valid_lft forever preferred_lft forever
```

- `lo`: 这是你的环回接口（loopback interface）。这是一个特殊的网络接口，主要用于网络软件测试和本地通信。这个接口的IPv4地址是127.0.0.1，IPv6地址是::1。这些地址都被设计成回环地址，也就是说发送到这些地址的任何数据都会回到发送者。你可以看到接口状态标志`LOOPBACK,UP,LOWER_UP`，其中`LOOPBACK`表示这是一个环回接口，`UP`和`LOWER_UP`表示接口已启用并运行。
- `eth0`: 这是你的主要网络接口。在WSL中，这个接口用于与Windows主机和网络中的其他设备通信。这个接口的IPv4地址是`172.29.44.15`，并且子网掩码是`/20`，也就是说这个网络的地址范围是`172.29.32.0`到`172.29.47.255`。`brd 172.29.47.255`表示的是广播地址，这个地址用于发送给网络中的所有设备的消息。这个接口还有一个IPv6地址`fe80::215:5dff:fe2e:12b3`，这是一个链路本地地址，用于在同一网络链路中的设备之间的通信。

> 注：
>
> ![image-20230518142435862](D:\ZJU\typoraImg\image-20230518142435862.png)